2025/06/16 00:31:26 Attempting to use port 8080
2025/06/16 00:31:27 Successfully freed port 8080
2025-06-16T00:31:27.425+0200	INFO	Initializing Telegram service	{"api_id": "26764638", "api_hash": "5cad...8f64"}
2025-06-16T00:31:27.426+0200	INFO	conn.mtproto.rpc	Initialized	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "retry_interval": "5s", "max_retries": 5}
2025-06-16T00:31:27.426+0200	INFO	Starting Telegram client
2025-06-16T00:31:27.426+0200	INFO	Starting	{"v": "v0.120.0"}
2025-06-16T00:31:27.427+0200	INFO	Connection restored from state	{"v": "v0.120.0", "addr": "", "key_id": "30da929c6a57bfaa"}
2025-06-16T00:31:27.427+0200	INFO	conn.mtproto.rpc	Initialized	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "retry_interval": "5s", "max_retries": 5}
2025-06-16T00:31:27.427+0200	DEBUG	conn.mtproto	Run: start	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2}
2025-06-16T00:31:27.455+0200	INFO	conn.mtproto	Key already exists	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto	Generating new session id	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.group	Task started	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "task": "readLoop"}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.read	Read loop started	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.group	Task started	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "task": "handleClose"}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.group	Task started	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "task": "pingLoop"}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.group	Task started	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "task": "ackLoop"}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.group	Task started	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "task": "saltsLoop"}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.group	Task started	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "task": "userCallback"}
2025-06-16T00:31:27.455+0200	DEBUG	conn	Initializing	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto	Invoke start	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388247846352}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.rpc	Do called	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388247846352}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto.rpc	Waiting for acknowledge	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "ack_id": 7516307388247846352}
2025-06-16T00:31:27.455+0200	DEBUG	conn.mtproto	Request	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0xbf9459b7", "type_name": "invokeWithoutUpdates#bf9459b7", "msg_id": 7516307388247846352}
2025-06-16T00:31:27.484+0200	DEBUG	conn.mtproto	Handle message	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0x73f1f8dc", "type_name": "message_container", "size_bytes": 88, "msg_id": 7516307389902148617}
2025-06-16T00:31:27.484+0200	DEBUG	conn.mtproto	Handle message	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0x9ec20908", "type_name": "new_session_created#9ec20908", "size_bytes": 28, "msg_id": 7516307389902148617}
2025-06-16T00:31:27.484+0200	DEBUG	conn.mtproto	Session created	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "unique_id": -3165294078610832180, "first_msg_id": 7516307388247846352, "first_msg_time": "2025-06-16T00:31:27.455+0200"}
2025-06-16T00:31:27.484+0200	INFO	conn	SessionInit	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2}
2025-06-16T00:31:27.484+0200	DEBUG	conn.mtproto	Request	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0xb921bd04", "type_name": "get_future_salts#b921bd04", "msg_id": 7516307388276432352}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto	Handle message	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0xf35c6d01", "type_name": "rpc_result", "size_bytes": 396, "msg_id": 7516307389922834433}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto	Handle result	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0x3072cfa1", "type_name": "gzip", "size_bytes": 384, "msg_id": 7516307388247846352}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto	Decompressed	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0xcc1a241e", "type_name": "config#cc1a241e", "size_bytes": 960, "msg_id": 7516307388247846352}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto.rpc	Handler called	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388247846352}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto	Invoke end	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388247846352}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto.group	Task complete	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "task": "userCallback", "elapsed": "32.673833ms"}
2025-06-16T00:31:27.488+0200	DEBUG	Ready	{"v": "v0.120.0"}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto	Invoke start	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388280583352}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto.rpc	Do called	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388280583352}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto.rpc	Waiting for acknowledge	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "ack_id": 7516307388280583352}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto	Request	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0xbf9459b7", "type_name": "invokeWithoutUpdates#bf9459b7", "msg_id": 7516307388280583352}
2025-06-16T00:31:27.488+0200	DEBUG	Data saved	{"v": "v0.120.0", "key_id": "30da929c6a57bfaa"}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto	Handle message	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0x62d6b459", "type_name": "msgs_ack#62d6b459", "size_bytes": 20, "msg_id": 7516307389902148617}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto	Received ack	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_ids": [7516307388247846352]}
2025-06-16T00:31:27.488+0200	DEBUG	conn.mtproto.rpc	Acknowledge callback not set	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388247846352}
2025-06-16T00:31:27.511+0200	DEBUG	conn.mtproto	Handle message	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0xae500895", "type_name": "future_salts#ae500895", "size_bytes": 84, "msg_id": 7516307390026300417}
2025-06-16T00:31:27.511+0200	DEBUG	conn.mtproto	Got future salts	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "server_time": "2025-06-16T00:31:27.000+0200"}
2025-06-16T00:31:27.531+0200	DEBUG	conn.mtproto	Handle message	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0xf35c6d01", "type_name": "rpc_result", "size_bytes": 28, "msg_id": 7516307390107973633}
2025-06-16T00:31:27.531+0200	DEBUG	conn.mtproto	Handle result	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0x8e1a1775", "type_name": "nearestDc#8e1a1775", "size_bytes": 16, "msg_id": 7516307388280583352}
2025-06-16T00:31:27.531+0200	DEBUG	conn.mtproto.rpc	Handler called	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388280583352}
2025-06-16T00:31:27.531+0200	DEBUG	conn.mtproto	Invoke end	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_id": 7516307388280583352}
2025-06-16T00:31:27.531+0200	DEBUG	conn	Invoke	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "duration": "43.286875ms", "ongoing": 0}
2025-06-16T00:31:27.531+0200	INFO	Telegram client is ready and connected
2025-06-16T00:31:27.531+0200	INFO	Telegram client initialized successfully
2025-06-16T00:31:27.531+0200	INFO	Checking for existing authenticated session
2025-06-16T00:31:27.531+0200	INFO	Session file found, checking authentication status
2025-06-16T00:31:27.531+0200	INFO	No valid persistent auth state found, user will need to authenticate
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /api/balance              --> main.handleBalance (4 handlers)
[GIN-debug] GET    /api/telegram/auth/callback --> main.handleTelegramAuthCallback (4 handlers)
[GIN-debug] GET    /api/telegram/phone       --> main.handleTelegramPhone (4 handlers)
[GIN-debug] POST   /api/telegram/verify-code --> main.handleTelegramVerifyCode (4 handlers)
[GIN-debug] POST   /api/telegram/verify-2fa  --> main.handleTelegramVerify2FA (4 handlers)
[GIN-debug] GET    /api/telegram/status      --> main.handleTelegramStatus (4 handlers)
[GIN-debug] POST   /api/telegram/logout      --> main.handleTelegramLogout (4 handlers)
[GIN-debug] GET    /api/telegram/groups      --> main.handleGetGroups (4 handlers)
[GIN-debug] GET    /api/telegram/current-user --> main.handleGetCurrentUser (4 handlers)
[GIN-debug] GET    /api/cmc/global           --> main.handleCMCGlobal (4 handlers)
[GIN-debug] GET    /api/trends               --> main.handleTrends (4 handlers)
[GIN-debug] GET    /api/ssr                  --> main.handleSSR (4 handlers)
[GIN-debug] GET    /api/exchange-flows       --> main.handleExchangeFlows (4 handlers)
[GIN-debug] GET    /api/active-addresses     --> main.handleActiveAddresses (4 handlers)
[GIN-debug] GET    /api/whale-transactions   --> main.handleWhaleTransactions (4 handlers)
[GIN-debug] GET    /api/funding-rate         --> main.handleFundingRate (4 handlers)
[GIN-debug] GET    /api/open-interest        --> main.handleOpenInterest (4 handlers)
[GIN-debug] GET    /api/altcoin-season       --> main.handleAltcoinSeasonIndex (4 handlers)
[GIN-debug] GET    /api/volume-trend         --> main.handleVolumeTrend (4 handlers)
[GIN-debug] GET    /api/bollinger-bands      --> main.handleBollingerBands (4 handlers)
[GIN-debug] GET    /api/rsi                  --> main.handleRSI (4 handlers)
[GIN-debug] GET    /api/moving-averages      --> main.handleMovingAverages (4 handlers)
[GIN-debug] GET    /api/fear-greed           --> main.handleFearGreed (4 handlers)
[GIN-debug] GET    /api/btc-dominance        --> main.handleBTCDominance (4 handlers)
[GIN-debug] GET    /api/market-cap           --> main.handleMarketCap (4 handlers)
[GIN-debug] GET    /api/eth-btc-ratio        --> main.handleETHBTCRatio (4 handlers)
[GIN-debug] GET    /api/liquidation          --> main.handleLiquidation (4 handlers)
[GIN-debug] GET    /api/google-trends        --> main.handleGoogleTrends (4 handlers)
[GIN-debug] GET    /api/portfolio            --> main.handlePortfolio (4 handlers)
[GIN-debug] GET    /api/ws                   --> main.handleWebSocket (4 handlers)
[GIN-debug] GET    /api/health               --> main.handleHealth (4 handlers)
[GIN-debug] GET    /api/metrics              --> main.handleSystemMetrics (4 handlers)
[GIN-debug] GET    /api/cache-stats          --> main.handleCacheStats (4 handlers)
[GIN-debug] GET    /api/circuit-breaker-stats --> main.handleCircuitBreakerStats (4 handlers)
[GIN-debug] GET    /api/defi-tvl             --> main.handleDeFiTVL (4 handlers)
[GIN-debug] GET    /api/social-sentiment     --> main.handleSocialSentiment (4 handlers)
[GIN-debug] GET    /api/options-flow         --> main.handleOptionsFlow (4 handlers)
[GIN-debug] GET    /api/stablecoin-flows     --> main.handleStablecoinFlows (4 handlers)
[GIN-debug] GET    /api/network-health       --> main.handleNetworkHealth (4 handlers)
[GIN-debug] GET    /api/institutional-flows  --> main.handleInstitutionalFlows (4 handlers)
[GIN-debug] GET    /api/yield-curves         --> main.handleYieldCurves (4 handlers)
[GIN-debug] GET    /api/correlation-matrix   --> main.handleCorrelationMatrix (4 handlers)
[GIN-debug] GET    /api/volatility-surface   --> main.handleVolatilitySurface (4 handlers)
[GIN-debug] GET    /api/liquidation-heatmap  --> main.handleLiquidationHeatmap (4 handlers)
2025/06/16 00:31:27 Server starting on port 8080
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on :8080
[GIN] 2025/06/16 - 00:31:29 | 200 |   246.34525ms |             ::1 | GET      "/api/whale-transactions"
[GIN] 2025/06/16 - 00:31:29 | 200 |  450.540917ms |             ::1 | GET      "/api/fear-greed"
[GIN] 2025/06/16 - 00:31:29 | 200 |  452.011208ms |             ::1 | GET      "/api/moving-averages"
[GIN] 2025/06/16 - 00:31:30 | 200 |   489.78075ms |             ::1 | GET      "/api/bollinger-bands"
[GIN] 2025/06/16 - 00:31:30 | 200 |  771.061125ms |             ::1 | GET      "/api/btc-dominance"
RSI Divergences detected: [Bullish Divergence]
[GIN] 2025/06/16 - 00:31:30 | 200 |  836.790167ms |             ::1 | GET      "/api/rsi"
[GIN] 2025/06/16 - 00:31:31 | 200 |  1.797654958s |             ::1 | GET      "/api/google-trends"
[GIN] 2025/06/16 - 00:31:39 | 200 |     120.458µs |             ::1 | GET      "/api/health"
[GIN] 2025/06/16 - 00:31:39 | 200 |      76.875µs |             ::1 | GET      "/api/defi-tvl"
[GIN] 2025/06/16 - 00:31:39 | 200 |          40µs |             ::1 | GET      "/api/social-sentiment"
[GIN] 2025/06/16 - 00:31:39 | 200 |          37µs |             ::1 | GET      "/api/institutional-flows"
2025-06-16T00:31:42.456+0200	DEBUG	conn.mtproto	Request	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "type_id": "0x62d6b459", "type_name": "msgs_ack#62d6b459", "msg_id": 7516307452673324792}
2025-06-16T00:31:42.457+0200	DEBUG	conn.mtproto.ack	Ack	{"v": "v0.120.0", "conn_id": 0, "dc_id": 2, "msg_ids": [7516307389922834433, 7516307390107973633]}
[GIN] 2025/06/16 - 00:31:47 | 200 |      46.292µs |             ::1 | GET      "/api/options-flow"
[GIN] 2025/06/16 - 00:31:47 | 200 |      29.083µs |             ::1 | GET      "/api/network-health"
[GIN] 2025/06/16 - 00:31:47 | 200 |      36.834µs |             ::1 | GET      "/api/liquidation-heatmap"
[GIN] 2025/06/16 - 00:31:53 | 200 |     382.375µs |             ::1 | GET      "/api/metrics"
[GIN] 2025/06/16 - 00:31:53 | 200 |      21.334µs |             ::1 | GET      "/api/cache-stats"
panic: runtime error: slice bounds out of range [-4:]

goroutine 200 [running]:
go-vue/pkg/market.(*MarketService).GetMovingAverages(0x0?)
	/Users/ivanmorozov/go-vue/pkg/market/market.go:1051 +0xdc8
main.fetchMetricData({0x100e953f2?, 0x0?})
	/Users/ivanmorozov/go-vue/main.go:191 +0x7a0
main.broadcastMarketData.func1({0x100e953f2, 0xf})
	/Users/ivanmorozov/go-vue/main.go:136 +0x2c
created by main.broadcastMarketData in goroutine 67
	/Users/ivanmorozov/go-vue/main.go:135 +0x90
exit status 2
